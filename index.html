<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <!-- å…³é”®ï¼šè®¾ç½®è§†å£ï¼Œç¦æ­¢ç”¨æˆ·ç¼©æ”¾ï¼Œç¡®ä¿ç§»åŠ¨ç«¯æ˜¾ç¤ºæ¯”ä¾‹æ­£ç¡® -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI æ™ºèƒ½é…è‰² Pro @Kaimana</title>
    <style>
        /* ================= å…¨å±€å˜é‡ä¸é‡ç½® ================= */
        :root {
            --bg-color: #f4f6f8;
            --primary-color: #3b82f6;
            --primary-hover: #2563eb;
            --text-main: #1f2937;
            --text-sub: #6b7280;
            --card-radius: 16px;
            --bar-radius: 12px;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            background: var(--bg-color); 
            color: var(--text-main);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        /* ================= é¡¶éƒ¨æ§åˆ¶æ  (å“åº”å¼) ================= */
        .top-bar {
            background: white; 
            padding: 20px; 
            border-radius: var(--bar-radius);
            display: flex; 
            gap: 15px; 
            align-items: center; 
            box-shadow: var(--shadow-sm);
            margin-bottom: 30px; 
            flex-wrap: wrap; /* å…è®¸æ¢è¡Œ */
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        h3 { 
            margin: 0; 
            font-size: 18px; 
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .controls-wrapper {
            display: flex;
            gap: 15px;
            flex: 1;
            flex-wrap: wrap;
            align-items: center;
        }

        .control-group { 
            display: flex; 
            align-items: center; 
            gap: 10px; 
        }

        label { 
            font-size: 14px; 
            font-weight: 500; 
            color: var(--text-sub); 
            white-space: nowrap;
        }
        
        /* è¾“å…¥æ¡†æ ·å¼ä¼˜åŒ– */
        select, input[type="number"] {
            padding: 10px 12px; 
            border: 1px solid #e5e7eb; 
            border-radius: 8px; 
            font-size: 14px;
            background-color: #f9fafb; 
            outline: none; 
            transition: all 0.2s;
            height: 42px; /* å¢å¤§è§¦æ§åŒºåŸŸ */
        }
        select:focus, input:focus { 
            border-color: var(--primary-color); 
            background: #fff; 
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
        }
        
        #themeSelect { min-width: 140px; }

        /* ç”ŸæˆæŒ‰é’® */
        button.btn-generate { 
            padding: 0 24px; 
            height: 42px;
            background: var(--primary-color); 
            color: white; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-weight: 600; 
            font-size: 14px;
            transition: all 0.2s; 
            white-space: nowrap;
            box-shadow: 0 2px 5px rgba(59, 130, 246, 0.3);
        }
        button.btn-generate:active { transform: scale(0.98); }

        /* ================= ç§»åŠ¨ç«¯é€‚é… (Media Queries) ================= */
        @media (max-width: 768px) {
            body { padding: 15px; } /* å‡å°‘å¤–è¾¹è· */

            .top-bar {
                flex-direction: column; /* å‚ç›´å †å  */
                align-items: stretch;
                padding: 15px;
                gap: 15px;
            }

            .controls-wrapper {
                flex-direction: column;
                align-items: stretch;
                gap: 12px;
            }

            .control-group {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }

            select, input[type="number"], .control-group { width: 100%; }
            #themeSelect { width: 100%; }

            button.btn-generate {
                width: 100%; /* æŒ‰é’®å…¨å®½ */
                margin-top: 5px;
                font-size: 16px; /* å­—ä½“åŠ å¤§ */
            }
        }

        /* ================= ç”»å»Šç½‘æ ¼å¸ƒå±€ ================= */
        .gallery {
            display: grid;
            /* æ™ºèƒ½å“åº”å¼ç½‘æ ¼ï¼šæœ€å°å®½åº¦160pxï¼Œè‡ªåŠ¨å¡«å…… */
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 25px;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* é’ˆå¯¹å°å±æ‰‹æœºä¼˜åŒ–ä¸ºåŒåˆ—ç´§å‡‘å¸ƒå±€ï¼Œæˆ–è€…å•åˆ— */
        @media (max-width: 480px) {
            .gallery {
                grid-template-columns: repeat(2, 1fr); /* å¼ºåˆ¶ä¸¤åˆ— */
                gap: 12px;
            }
        }

        /* ================= å¡ç‰‡è®¾è®¡ ================= */
        .poster-card {
            background: #fff;
            aspect-ratio: 3.5/4;
            border-radius: var(--card-radius);
            padding: 12px;
            box-shadow: var(--shadow-sm);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            border: 1px solid rgba(0,0,0,0.03);
        }
        
        /* ä»…åœ¨æ”¯æŒ hover çš„è®¾å¤‡ä¸Šå¯ç”¨æ‚¬æµ®ä¸Šç§» */
        @media (hover: hover) {
            .poster-card:hover { 
                transform: translateY(-6px); 
                box-shadow: var(--shadow-lg); 
            }
        }

        .card-header {
            display: flex; justify-content: space-between; align-items: center; 
            margin-bottom: 10px; padding: 0 2px;
        }
        .card-title {
            font-size: 11px; font-weight: 700; color: #9ca3af; 
            text-transform: uppercase; letter-spacing: 0.5px;
        }
        
        /* è‰²å—å®¹å™¨ */
        .palette-box {
            flex: 1; 
            display: flex; 
            gap: 0; 
            border-radius: 12px; /* ç¨å¾®åŠ å¤§åœ†è§’ */
            overflow: hidden;
            cursor: pointer;
            box-shadow: inset 0 0 0 1px rgba(0,0,0,0.05); /* åŠ æ·±ä¸€ç‚¹å†…æè¾¹ */
            margin-bottom: 8px; /* ä¸åº•éƒ¨æŒ‰é’®æ‹‰å¼€ä¸€ç‚¹è·ç¦» */
        }
        
        .swatch-col {
            flex: 1; display: flex; flex-direction: column; align-items: center; position: relative;
        }
        
        .color-strip {
            width: 100%; height: 100%; transition: width 0.2s;
        }

        /* é¢œè‰²ä»£ç  (PCç«¯æ‚¬æµ®æ˜¾ç¤ºï¼Œç§»åŠ¨ç«¯ç‚¹å‡»å¤åˆ¶æ—¶æç¤º) */
        .hex-code {
            position: absolute; bottom: 10px;
            font-size: 10px; color: #333; font-family: 'SF Mono', 'Monaco', monospace;
            background: rgba(255,255,255,0.9); 
            padding: 3px 6px; border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            opacity: 0; transform: translateY(5px);
            transition: all 0.2s; pointer-events: none;
            white-space: nowrap;
        }
        
        @media (hover: hover) {
            .swatch-col:hover .color-strip { filter: brightness(0.95); }
            .swatch-col:hover .hex-code { opacity: 1; transform: translateY(0); }
        }

        /* åº•éƒ¨æ“ä½œ */
        .card-footer {
            margin-top: 12px; 
        }
        .btn-copy-css {
            width: 100%;
            font-size: 11px; 
            color: var(--text-main); 
            background: #f3f4f6; 
            border: 1px solid transparent;
            padding: 8px 0; 
            border-radius: 8px; 
            cursor: pointer; 
            transition: all 0.2s;
            font-weight: 600;
        }
        .btn-copy-css:active { background: #e5e7eb; transform: scale(0.98); }
        @media (hover: hover) {
            .btn-copy-css:hover { background: #e5e7eb; }
        }

        /* ================= Toast æç¤ºæ¡† ================= */
        #toast {
            visibility: hidden;
            min-width: 200px;
            background-color: rgba(31, 41, 55, 0.9);
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 12px 16px;
            position: fixed;
            z-index: 100;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%) translateY(20px);
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            backdrop-filter: blur(4px);
        }

        #toast.show {
            visibility: visible;
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* ================= åº•éƒ¨é¡µè„š ================= */
        .footer {
            text-align: center;
            padding: 50px 20px 30px; /* ä¸Šè¾¹è·å¤§ä¸€ç‚¹ï¼Œå½¢æˆè§†è§‰å‘¼å¸æ„Ÿ */
            margin-top: 40px;
            border-top: 1px solid rgba(0, 0, 0, 0.05); /* æç»†åˆ†å‰²çº¿ */
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        .footer .brand {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-main);
            margin-bottom: 8px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            letter-spacing: 0.5px;
        }

        .footer .contact {
            font-size: 13px;
            color: var(--text-sub);
            opacity: 0.8;
        }

        .footer .contact a {
            color: var(--text-sub);
            text-decoration: none;
            transition: color 0.2s;
            border-bottom: 1px dashed transparent;
        }

        /* é¼ æ ‡æ‚¬åœæ•ˆæœ */
        .footer .contact a:hover {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

    </style>
</head>
<body>

<div class="top-bar">
    <h3>ğŸ¨ é…è‰² Pro</h3>
    
    <div class="controls-wrapper">
        <div class="control-group" style="flex: 2;">
            <label>é£æ ¼ä¸»é¢˜</label>
            <select id="themeSelect">
                <option value="pastel">é©¬å¡é¾™ (Pastel)</option>
                <option value="vibrant">å¤šå·´èƒº (Vibrant)</option>
                <option value="morandi">è«å…°è¿ª (Morandi)</option>
                <option value="monochrome">æç®€å•è‰² (Mono)</option>
                <option value="dark">èµ›åšæœ‹å…‹ (Dark)</option>
                <option value="forest">æ£®æ—ç‰©è¯­ (Forest)</option>
                <option value="ocean">æ·±æµ·å¹½è“ (Ocean)</option>
                <option value="luxury">é»‘é‡‘å¥¢å (Luxury)</option>
            </select>
        </div>

        <div class="control-group" style="flex: 1;">
            <label>æ•°é‡</label>
            <input type="number" id="countInput" value="16" min="1" max="40">
        </div>

        <button class="btn-generate" onclick="generateBatch()">ğŸš€ ç«‹å³ç”Ÿæˆ</button>
    </div>
</div>

<!-- ç»“æœå±•ç¤ºåŒº -->
<div class="gallery" id="gallery">
    <!-- JS æ’å…¥å†…å®¹ -->
</div>

<!-- åº•éƒ¨å“ç‰Œæ  -->
<div class="footer">
    <div class="brand">Author:@Kaimana</div>
    <div class="contact">
        Email(å•†åŠ¡åˆä½œ): <a href="mailto:bdera4@163.com">bdera4@163.com</a>
    </div>
</div>

<!-- Toast æç¤ºå®¹å™¨ -->
<div id="toast">å¤åˆ¶æˆåŠŸ</div>

<script>
    // ==========================================
    // 1. æ ¸å¿ƒæ•°å­¦å·¥å…· (ä¿æŒä¸å˜)
       // è¾…åŠ©å·¥å…·ï¼šæ›´è‡ªç„¶çš„éšæœº
    function rand(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }
    function pick(arr) { return arr[Math.floor(Math.random() * arr.length)]; }
    
    // è¾…åŠ©å·¥å…·ï¼šç”Ÿæˆå’Œè°è‰²ç›¸
    // å•†ä¸šçº§é…è‰²ç§˜è¯€ï¼šåœ¨æ”¹å˜æ˜åº¦çš„åŒæ—¶ï¼Œå¾®è°ƒè‰²ç›¸ï¼ˆHue Shiftï¼‰ï¼Œè®©é¢œè‰²æ›´é€šé€
    function shiftHue(h, degree) { return (h + degree + 360) % 360; }
    function hslToHex(h, s, l) {
        l /= 100;
        const a = s * Math.min(l, 1 - l) / 100;
        const f = n => {
            const k = (n + h / 30) % 12;
            const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
            return Math.round(255 * color).toString(16).padStart(2, '0');
        };
        return `#${f(0)}${f(8)}${f(4)}`.toUpperCase();
    }

    // ==========================================
    // 2. é…è‰²ç”Ÿæˆå¼•æ“ (ä¿æŒä¸å˜)
    // ==========================================
    function generateGradientColors(count, options) {
        const { 
            baseHue = rand(0, 360), hueSpan = 60, sRange = [60, 85], lRange = [30, 80],
            hueDirection = Math.random() > 0.5 ? 1 : -1
        } = options;
        let hslColors = [];
        for (let i = 0; i < count; i++) {
            const progress = i / (count - 1);
            const h = (baseHue + (progress * hueSpan * hueDirection) + 360) % 360;
            const s = rand(sRange[0], sRange[1]);
            const lStart = lRange[0], lEnd = lRange[1];
            let l = lStart + (progress * (lEnd - lStart)) + rand(-5, 5); 
            hslColors.push({h, s, l});
        }
        if (Math.random() > 0.5) hslColors.reverse();
        return hslColors.map(c => hslToHex(c.h, c.s, c.l));
    }

    // æ ¸å¿ƒç”Ÿæˆé€»è¾‘
    function getColorsByTheme(theme) {
        let hslColors = [];

        // --- 1. å¤šå·´èƒº (Vibrant) : é«˜é¥±å’Œï¼Œå¼ºå¯¹æ¯”ï¼Œä¸”è¦æœ‰ä¸»æ¬¡ ---
        if (theme === 'vibrant') {
            const strategy = pick(['triad', 'complimentary', 'analogous']);
            const mainHue = rand(0, 360);
            
            // åŸºç¡€é«˜é¥±å’Œè‰²
            hslColors.push({ h: mainHue, s: rand(80, 100), l: rand(50, 60) });
            
            if (strategy === 'triad') {
                // ä¸‰è§’æ’è‰²
                hslColors.push({ h: shiftHue(mainHue, 120), s: rand(70, 90), l: rand(55, 75) });
                hslColors.push({ h: shiftHue(mainHue, 240), s: rand(80, 100), l: rand(45, 65) });
                hslColors.push({ h: shiftHue(mainHue, rand(30, 60)), s: rand(90, 100), l: rand(80, 95) }); // äº®è‰²ç‚¹ç¼€
            } else {
                // é‚»è¿‘è‰²/è¡¥è‰²æ··åˆ
                hslColors.push({ h: shiftHue(mainHue, rand(20, 50)), s: rand(80, 100), l: rand(50, 70) });
                hslColors.push({ h: shiftHue(mainHue, 180), s: rand(70, 90), l: rand(60, 80) }); // å¼ºå¯¹æ¯”è¡¥è‰²
                hslColors.push({ h: shiftHue(mainHue, rand(-30, -60)), s: rand(90, 100), l: rand(50, 65) });
            }
        }
        
        // --- 2. è«å…°è¿ª (Morandi) : å…³é”®æ˜¯â€œè’™å±‚æ„Ÿâ€ï¼Œä½é¥±å’Œä½†ä¸èƒ½è„ ---
        else if (theme === 'morandi') {
            const baseHue = rand(0, 360);
            // è«å…°è¿ªè‰²ç³»é€šå¸¸ä¸ä»…æ˜¯Sä½ï¼ŒLä¹Ÿè¦é€‚ä¸­åé«˜ï¼Œä¸”è‰²ç›¸è·¨åº¦ä¸å¤§
            const hueStep = rand(15, 40); 
            
            // ç”Ÿæˆä¸€ç»„å¸¦æœ‰å¾®å¦™è‰²ç›¸å˜åŒ–çš„ç°è°ƒ
            hslColors.push({ h: baseHue, s: rand(10, 25), l: rand(35, 50) }); // æ·±ç°åŸºè°ƒ
            hslColors.push({ h: shiftHue(baseHue, hueStep), s: rand(15, 30), l: rand(55, 65) });
            hslColors.push({ h: shiftHue(baseHue, hueStep * 2), s: rand(20, 35), l: rand(65, 75) });
            hslColors.push({ h: shiftHue(baseHue, hueStep * 3 + 180), s: rand(5, 15), l: rand(75, 85) }); // åŠ å…¥ä¸€ç‚¹å¯¹æ¯”è‰²å€¾å‘çš„äº®ç°
            
            // æŒ‰äº®åº¦æ’åºè®©è§†è§‰æ›´èˆ’æœ
            hslColors.sort((a, b) => a.l - b.l);
        }

        // --- 3. é©¬å¡é¾™ (Pastel) : æ¸…æ–°ï¼Œé«˜æ˜åº¦ï¼Œè‰²ç›¸è¦å¹²å‡€ ---
        else if (theme === 'pastel') {
            const baseHue = rand(0, 360);
            // é¿å…çœ‹èµ·æ¥åƒç™½è‰²ï¼ŒSä¸èƒ½å¤ªä½(40-70)ï¼ŒLä¸èƒ½å¤ªé«˜(80-92)
            for(let i=0; i<4; i++) {
                hslColors.push({
                    h: shiftHue(baseHue, i * rand(40, 90)), // å¤§è·¨åº¦è‰²ç›¸
                    s: rand(45, 75), 
                    l: rand(83, 93)
                });
            }
        }

        // --- Monochrome: æç®€å•è‰² (6ç§ç­–ç•¥å¢å¼ºç‰ˆ) ---
        else if (theme === 'monochrome') {
            // ç­–ç•¥æ± ï¼šä¸å†åªæ˜¯çº¿æ€§æ¸å˜
            const strategy = pick(['classic', 'high-contrast', 'faded', 'dark-mode', 'vivid', 'slate', 'sepia']);
            const baseHue = rand(0, 360);

            if (strategy === 'high-contrast') {
                // ç¡¬è°ƒï¼šææ·± + æäº® (è·³è¿‡ä¸­é—´ç°ï¼Œè§†è§‰å†²å‡»åŠ›å¼º)
                hslColors = [
                    { h: baseHue, s: rand(0, 20), l: rand(5, 10) },     // è¿‘ä¹é»‘
                    { h: baseHue, s: rand(10, 30), l: rand(20, 30) },   // æ·±ç°
                    { h: baseHue, s: rand(0, 10), l: rand(85, 92) },    // ç°ç™½
                    { h: baseHue, s: 0, l: rand(95, 100) }              // çº¯ç™½
                ];
            }
            else if (strategy === 'faded') {
                // è¤ªè‰²ï¼šæ•´ä½“åäº®ï¼Œä½é¥±å’Œ (ç©ºæ°”æ„Ÿï¼Œåƒæ°´æ´—å¸ƒæ–™)
                // è¿™ç§é£æ ¼é€šå¸¸ç”¨äºèƒŒæ™¯ï¼Œéå¸¸æŸ”å’Œ
                const s = rand(5, 30);
                hslColors = [
                    { h: baseHue, s: s, l: rand(60, 70) }, // ä¸­äº®
                    { h: baseHue, s: s, l: rand(72, 80) },
                    { h: baseHue, s: s, l: rand(82, 90) },
                    { h: baseHue, s: s/2, l: rand(92, 98) } // äº®ç™½
                ];
            }
            else if (strategy === 'dark-mode') {
                // æš—é»‘æ¨¡å¼ï¼šå…¨æš—è‰² (é€‚åˆ UI è®¾è®¡)
                // åªæœ‰ç»†å¾®çš„æ˜åº¦å˜åŒ–
                const s = rand(10, 40);
                hslColors = [
                    { h: baseHue, s: s, l: rand(5, 10) },   // èƒŒæ™¯é»‘
                    { h: baseHue, s: s, l: rand(12, 18) },  // å¡ç‰‡é»‘
                    { h: baseHue, s: s, l: rand(20, 30) },  // è¾¹æ¡†ç°
                    { h: shiftHue(baseHue, 10), s: s+20, l: rand(40, 55) } // å¼ºè°ƒè‰²(ç¨å¾®äº®ä¸€ç‚¹)
                ];
            }
            else if (strategy === 'vivid') {
                // å¼ºåŠ›å•è‰²ï¼šé«˜é¥±å’Œåº¦ (Pop Art é£æ ¼)
                // å³ä½¿æ˜¯æš—éƒ¨ä¹Ÿå¸¦æœ‰å¼ºçƒˆçš„è‰²å½©ï¼Œä¸å‘ç°
                const s = rand(70, 100);
                hslColors = [
                    { h: baseHue, s: s, l: rand(20, 35) }, // æ·±æµ“è‰²
                    { h: baseHue, s: s, l: rand(40, 55) }, // çº¯è‰²
                    { h: baseHue, s: s, l: rand(60, 75) }, // æ˜äº®è‰²
                    { h: baseHue, s: rand(20, 50), l: rand(85, 95) } // æµ…è‰²
                ];
            }
            else if (strategy === 'slate') {
                // å†·æ·¡ç°ï¼šé”å®šè“/é’è‰²ç›¸ï¼Œä½é¥±å’Œ (å•†åŠ¡/ç§‘æŠ€æ„Ÿ)
                const slateHue = rand(190, 230); // è“ç°èŒƒå›´
                const s = rand(5, 20);
                hslColors = [
                    { h: slateHue, s: s, l: rand(15, 25) },
                    { h: slateHue, s: s, l: rand(35, 45) },
                    { h: slateHue, s: s, l: rand(55, 65) },
                    { h: slateHue, s: s, l: rand(75, 85) }
                ];
            }
            else if (strategy === 'sepia') {
                // æš–è°ƒæ€€æ—§ï¼šé”å®šçº¢/æ©™/é»„ï¼Œæ¨¡æ‹Ÿè€ç…§ç‰‡
                const sepiaHue = rand(20, 45); // æ£•é»„èŒƒå›´
                const s = rand(20, 40);
                hslColors = [
                    { h: sepiaHue, s: s, l: rand(15, 25) }, // å’–å•¡è¤
                    { h: sepiaHue, s: s, l: rand(35, 50) }, // æ³¥åœŸ
                    { h: sepiaHue, s: s, l: rand(60, 75) }, // ç‰›çš®çº¸
                    { h: sepiaHue, s: s, l: rand(80, 92) }  // ç±³é»„
                ];
            }
            else {
                // Classic: ç»å…¸çº¿æ€§æ¸å˜ (ä¿ç•™åŸæœ‰é€»è¾‘ï¼Œä½œä¸ºä¸€ç§å¯èƒ½æ€§)
                // å¢åŠ è‰²ç›¸å¾®è°ƒ(Hue Shift)è®©æ¸å˜æ›´ç”ŸåŠ¨
                const baseSat = rand(20, 70);
                for(let i=0; i<4; i++) {
                    const progress = i / 3;
                    const hueShift = (progress * 15) * (Math.random() > 0.5 ? 1 : -1); 
                    hslColors.push({
                        h: shiftHue(baseHue, hueShift), 
                        s: Math.max(0, baseSat - (progress * 10)), 
                        l: 20 + (progress * 70)
                    });
                }
            }
        }

        // --- 6. èµ›åšæœ‹å…‹ (Dark) : é‡å†™ï¼å¢åŠ å¤šæ ·æ€§ ---
        else if (theme === 'dark') {
            // èƒŒæ™¯ä¸å†åªæ˜¯æ·±è“ã€‚å¯ä»¥æ˜¯æ·±ç´«ã€æ·±çº¢ã€æ·±é’
            const bgHue = rand(0, 360); 
            // éœ“è™¹è‰²ï¼šå¿…é¡»é«˜é¥±å’Œã€é«˜äº®åº¦
            const neonHue1 = shiftHue(bgHue, rand(120, 240)); // å¯¹æ¯”è‰²
            const neonHue2 = shiftHue(bgHue, rand(30, 90));   // é‚»è¿‘äº®è‰²
            
            hslColors = [
                { h: bgHue, s: rand(60, 80), l: rand(5, 12) },     // ææ·±èƒŒæ™¯
                { h: shiftHue(bgHue, 15), s: rand(50, 70), l: rand(20, 30) }, // æ¬¡æ·±èƒŒæ™¯
                { h: neonHue1, s: rand(90, 100), l: rand(55, 75) }, // éœ“è™¹ä¸»è‰²
                { h: neonHue2, s: rand(80, 100), l: rand(80, 95) }  // é«˜å…‰ç‚¹ç¼€
            ];
        }

        // --- Forest: æ£®æ—ç‰©è¯­ (6ç§ç­–ç•¥å¢å¼ºç‰ˆ) ---
        else if (theme === 'forest') {
            const strategy = pick(['deep-woods', 'mist', 'autumn', 'nordic', 'enchanted', 'bamboo']);

            if (strategy === 'autumn') {
                // é‡‘ç§‹ï¼šçº¢ã€æ©™ã€é»„ã€è¤ (æš–è‰²ç³»)
                const baseH = rand(20, 45);
                hslColors = [
                   { h: baseH, s: rand(60, 80), l: rand(15, 30) },      // æ·±çº¢è¤
                   { h: shiftHue(baseH, 10), s: rand(50, 70), l: rand(40, 55) }, // ç„¦ç³–è‰²
                   { h: shiftHue(baseH, 20), s: rand(60, 80), l: rand(60, 75) }, // é‡‘å¶
                   { h: shiftHue(baseH, 30), s: rand(40, 60), l: rand(85, 95) }  // ç§‹æ—¥æš–å…‰
                ];
            } 
            else if (strategy === 'mist') {
                // è¿·é›¾ï¼šä½é¥±å’Œåº¦ç°ç»¿ (è«å…°è¿ªæ„Ÿ)
                const baseH = rand(130, 170); // åé’çš„ç»¿
                hslColors = [
                    { h: baseH, s: rand(10, 25), l: rand(20, 35) }, // è¿œå±±ç°
                    { h: baseH, s: rand(10, 20), l: rand(45, 60) }, // é›¾ä¸­æ ‘
                    { h: baseH, s: rand(5, 15), l: rand(70, 80) },  // æµ“é›¾
                    { h: rand(180, 200), s: rand(10, 30), l: rand(90, 98) } // å†·ç™½å…‰
                ];
            }
            else if (strategy === 'nordic') {
                // åŒ—æ¬§å†·æ‰ï¼šè“ç»¿è‰²è°ƒ (Teal/Blue-Green)
                const baseH = rand(150, 180);
                hslColors = [
                    { h: baseH, s: rand(40, 60), l: rand(10, 20) }, // å†·æ‰æ·±è‰²
                    { h: shiftHue(baseH, -10), s: rand(30, 50), l: rand(30, 45) }, // é’ˆå¶ç»¿
                    { h: shiftHue(baseH, 10), s: rand(20, 40), l: rand(60, 80) }, // é›ªè‰²
                    { h: 200, s: rand(10, 30), l: rand(85, 95) }    // å¯’å†·å¤©ç©º
                ];
            }
            else if (strategy === 'enchanted') {
                // é­”æ³•ç§˜å¢ƒï¼šæ·±ç»¿èƒŒæ™¯ + ç´«/ç²‰/äº®é’ç‚¹ç¼€
                const bgH = rand(140, 170);
                const magicH = pick([280, 320, 180]); // ç´«ã€ç²‰ã€è§å…‰é’
                hslColors = [
                    { h: bgH, s: rand(60, 80), l: rand(5, 15) },    // ææ·±å¢¨ç»¿
                    { h: shiftHue(bgH, 20), s: rand(50, 70), l: rand(20, 35) }, // æš—ç»¿
                    { h: magicH, s: rand(60, 90), l: rand(50, 70) }, // é­”æ³•æ¤ç‰© (ä¸»è‰²)
                    { h: magicH, s: rand(80, 100), l: rand(80, 95) } // å‘å…‰å­¢å­ (é«˜å…‰)
                ];
            }
            else if (strategy === 'bamboo') {
                // ç«¹æ—ï¼šé«˜äº®é»„ç»¿ (Yellow-Green)
                const baseH = rand(70, 100);
                hslColors = [
                    { h: baseH, s: rand(40, 60), l: rand(25, 40) }, // è€ç«¹
                    { h: shiftHue(baseH, 10), s: rand(50, 70), l: rand(50, 65) }, // æ–°ç«¹
                    { h: shiftHue(baseH, 15), s: rand(60, 80), l: rand(75, 88) }, // å«©å¶
                    { h: 45, s: rand(20, 40), l: rand(90, 98) }     // é˜³å…‰é€å°„
                ];
            }
            else {
                // Deep Woods: ç»å…¸æ·±æ²‰è€æ—
                const greenBase = rand(100, 140);
                hslColors = [
                    { h: greenBase, s: rand(30, 50), l: rand(10, 20) },    // æ·±éƒç»¿
                    { h: rand(25, 40), s: rand(20, 40), l: rand(25, 40) }, // æ ‘çš®è¤ (å¯¹æ¯”è‰²)
                    { h: greenBase, s: rand(40, 60), l: rand(40, 60) },    // è‹”è—“
                    { h: shiftHue(greenBase, 30), s: rand(50, 70), l: rand(70, 85) }   // æ—é—´äº®æ–‘
                ];
            }
        }

        // --- Ocean: æ·±æµ·å¹½è“ (5ç§ç­–ç•¥) ---
        else if (theme === 'ocean') {
            const strategy = pick(['classic', 'tropical', 'abyss', 'storm', 'coral', 'glacial']);
            
            if (strategy === 'tropical') {
                // çƒ­å¸¦ï¼šè“ç»¿è°ƒ + æ²™è‰²
                const baseH = rand(160, 190); // é’ç»¿
                hslColors = [
                    { h: baseH, s: rand(60, 80), l: rand(30, 45) }, // æµ·æ°´ç»¿
                    { h: shiftHue(baseH, 20), s: rand(50, 70), l: rand(50, 70) }, // æµ…é€è“
                    { h: shiftHue(baseH, 40), s: rand(40, 60), l: rand(80, 90) }, // æµªèŠ±
                    { h: rand(30, 50), s: rand(30, 50), l: rand(85, 95) }  // æ²™æ»©ç™½
                ];
            } 
            else if (strategy === 'abyss') {
                // æ·±æ¸Šï¼šæé»‘è“ + è§å…‰é’
                const baseH = rand(220, 250);
                hslColors = [
                    { h: baseH, s: rand(50, 80), l: rand(2, 8) },   // æ·±æ¸Šé»‘
                    { h: shiftHue(baseH, 10), s: rand(40, 60), l: rand(15, 25) }, // æ·±è“
                    { h: shiftHue(baseH, -20), s: rand(30, 50), l: rand(30, 40) }, // æš—æµ
                    { h: rand(160, 190), s: 100, l: rand(60, 80) }  // ç”Ÿç‰©è§å…‰(äº®é’)
                ];
            }
            else if (strategy === 'storm') {
                // é£æš´ï¼šä½é¥±å’Œç°è“
                const baseH = rand(200, 230);
                hslColors = [
                    { h: baseH, s: rand(10, 30), l: rand(20, 35) }, // æ·±ç°æµ·
                    { h: shiftHue(baseH, 5), s: rand(5, 25), l: rand(40, 55) }, // ä¹Œäº‘
                    { h: shiftHue(baseH, 10), s: rand(0, 20), l: rand(60, 75) }, // ç°ç™½æµª
                    { h: rand(190, 210), s: rand(5, 15), l: rand(85, 95) }  // è‹ç™½
                ];
            }
            else if (strategy === 'coral') {
                // çŠç‘šï¼šè“æµ· + ç²‰/æ©™ç‚¹ç¼€
                const baseH = rand(195, 225);
                const accentH = pick([rand(320, 350), rand(10, 30)]); // ç²‰æˆ–æ©™
                hslColors = [
                    { h: baseH, s: rand(60, 80), l: rand(20, 35) },
                    { h: shiftHue(baseH, 15), s: rand(50, 70), l: rand(40, 60) },
                    { h: shiftHue(baseH, 30), s: rand(40, 60), l: rand(70, 85) },
                    { h: accentH, s: rand(70, 90), l: rand(60, 75) } // çŠç‘šè‰²ç‚¹ç¼€
                ];
            }
            else if (strategy === 'glacial') {
                // å†°å·ï¼šé«˜äº®ï¼Œæå†·
                const baseH = rand(180, 210);
                hslColors = [
                    { h: baseH, s: rand(40, 60), l: rand(25, 40) }, // å†°åº•
                    { h: shiftHue(baseH, 5), s: rand(30, 50), l: rand(60, 75) },
                    { h: shiftHue(baseH, 10), s: rand(20, 40), l: rand(80, 90) },
                    { h: shiftHue(baseH, 15), s: rand(10, 30), l: 96 } // çº¯å†°ç™½
                ];
            }
            else {
                // Classic ç»å…¸æ¸å˜
                const baseH = rand(200, 240);
                hslColors = [
                    { h: baseH, s: rand(60, 90), l: rand(10, 20) },
                    { h: shiftHue(baseH, -15), s: rand(50, 80), l: rand(30, 50) },
                    { h: shiftHue(baseH, -30), s: rand(40, 70), l: rand(50, 70) },
                    { h: shiftHue(baseH, -45), s: rand(30, 60), l: rand(75, 90) }
                ];
            }
        }

                // --- Luxury: é»‘é‡‘å¥¢å (5ç§ç­–ç•¥) ---
        else if (theme === 'luxury') {
            const strategy = pick(['classic', 'platinum', 'royal', 'champagne', 'rose-noir']);

            if (strategy === 'champagne') {
                // é¦™æ§Ÿè½»å¥¢ï¼šæµ…è‰²èƒŒæ™¯ï¼(é‡è¦å·®å¼‚ç‚¹)
                // ç±³ç™½/å¥¶æ²¹èƒŒæ™¯ + æ·±é‡‘æ–‡å­—
                const baseH = rand(35, 50);
                hslColors = [
                    { h: baseH, s: rand(20, 40), l: rand(92, 98) }, // çç ç™½
                    { h: baseH, s: rand(30, 50), l: rand(80, 90) }, // é¦™æ§Ÿæµ…è‰²
                    { h: baseH, s: rand(40, 60), l: rand(60, 75) }, // é¦™æ§Ÿé‡‘
                    { h: baseH, s: rand(50, 70), l: rand(20, 35) }  // æ·±å¤é“œ(æ–‡å­—è‰²)
                ];
                // åè½¬é¡ºåºï¼Œè®©æ·±è‰²åœ¨æœ€ä¸‹é¢ï¼ˆUIæ˜¾ç¤ºä¸Šï¼‰æˆ–è€…ä¿æŒé€»è¾‘
                // è¿™é‡Œæˆ‘ä»¬ä¿æŒé¡ºåºï¼ŒUIä¸Šæ˜¾ç¤ºä¸ºæµ…->æ·±
            }
            else if (strategy === 'platinum') {
                // é“‚é‡‘/é’»çŸ³ï¼šå†·è‰²è°ƒé»‘ç™½
                const bgH = rand(200, 230);
                hslColors = [
                    { h: bgH, s: rand(10, 30), l: rand(5, 12) },    // å†·é»‘
                    { h: bgH, s: rand(10, 20), l: rand(20, 30) },   // ç‚­ç°
                    { h: bgH, s: rand(0, 10), l: rand(60, 80) },    // é“¶ç°
                    { h: 0, s: 0, l: rand(90, 100) }                // é’»çŸ³ç™½äº®å…‰
                ];
            }
            else if (strategy === 'royal') {
                // çš‡å®¶ä¸ç»’ï¼šæœ‰è‰²èƒŒæ™¯ (çº¢/ç»¿/è“)
                const hueType = pick([350, 150, 230]); // çº¢ï¼Œç»¿ï¼Œè“
                const bgH = (hueType + rand(-10, 10) + 360) % 360;
                hslColors = [
                    { h: bgH, s: rand(50, 80), l: rand(8, 15) },    // ä¸ç»’æ·±åº•
                    { h: bgH, s: rand(40, 60), l: rand(20, 30) },   // ä¸ç»’æ¬¡äº®
                    { h: rand(40, 55), s: rand(60, 90), l: rand(50, 65) }, // å¥¢åé‡‘
                    { h: rand(40, 55), s: rand(70, 100), l: rand(75, 90) } // é‡‘é«˜å…‰
                ];
            }
            else if (strategy === 'rose-noir') {
                // æš—å¤œç«ç‘°ï¼šæš–é»‘ + ç«ç‘°é‡‘
                const bgH = rand(340, 360);
                hslColors = [
                    { h: bgH, s: rand(10, 25), l: rand(5, 10) },     // æš–é»‘
                    { h: bgH, s: rand(15, 30), l: rand(15, 25) },    // æš–è¤ç°
                    { h: rand(330, 350), s: rand(40, 60), l: rand(60, 75) }, // ç«ç‘°é‡‘
                    { h: rand(330, 350), s: rand(50, 70), l: rand(80, 92) }  // ç²‰äº®å…‰
                ];
            }
            else {
                // Classic: ç»å…¸çº¯é»‘ + é»„é‡‘
                hslColors = [
                    { h: 0, s: 0, l: 0 },                             // çº¯é»‘
                    { h: 45, s: rand(10, 30), l: rand(10, 20) },      // é»‘é‡‘æ¸å˜è¿‡æ¸¡
                    { h: rand(40, 50), s: rand(70, 100), l: rand(50, 65) }, // çº¯é‡‘
                    { h: rand(40, 55), s: rand(80, 100), l: rand(80, 95) }  // é—ªå…‰é‡‘
                ];
            }
        }

        return hslColors.map(c => hslToHex(c.h, c.s, c.l));
    }
    // ==========================================
    // 3. ç•Œé¢æ¸²æŸ“ä¸äº¤äº’
    // ==========================================

    function generateBatch() {
        const theme = document.getElementById('themeSelect').value;
        const count = parseInt(document.getElementById('countInput').value) || 16;
        const gallery = document.getElementById('gallery');
        
        gallery.style.opacity = '0';
        
        setTimeout(() => {
            gallery.innerHTML = '';
            
            for (let i = 0; i < count; i++) {
                const colors = getColorsByTheme(theme);
                // æˆªå–ä¸»é¢˜åç§°é¦–å­—æ¯å¤§å†™
                const title = document.querySelector(`#themeSelect option[value="${theme}"]`).text.split(' ')[0];
                
                const cardHTML = `
                    <div class="poster-card" style="animation: fadeIn 0.4s ease forwards ${i * 0.05}s">
                        <div class="card-header">
                            <span class="card-title">${title} #${i+1}</span>
                        </div>
                        <div class="palette-box">
                            ${colors.map((c) => `
                                <div class="swatch-col" onclick="copyToClipboard('${c}', 'é¢œè‰²ä»£ç  ${c} å·²å¤åˆ¶')">
                                    <div class="color-strip" style="background-color: ${c}"></div>
                                    <span class="hex-code">${c}</span>
                                </div>
                            `).join('')}
                        </div>
                        <div class="card-footer">
                            <button class="btn-copy-css" onclick="copyPalette('${colors.join(', ')}')">
                                å¤åˆ¶ CSS æ¸å˜ä»£ç 
                            </button>
                        </div>
                    </div>
                `;
                gallery.innerHTML += cardHTML;
            }
            gallery.style.opacity = '1';
        }, 150);
    }

    // æ˜¾ç¤º Toast æç¤º
    function showToast(message) {
        const toast = document.getElementById("toast");
        toast.textContent = message;
        toast.className = "show";
        
        // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨ï¼ˆå¦‚æœæœ‰ï¼‰
        if (toast.timeoutId) clearTimeout(toast.timeoutId);
        
        toast.timeoutId = setTimeout(function(){ 
            toast.className = toast.className.replace("show", ""); 
        }, 2000);
    }

    // å¤åˆ¶å•ä¸ªé¢œè‰²
    function copyToClipboard(text, msg) {
        navigator.clipboard.writeText(text).then(() => {
            showToast(msg || 'å·²å¤åˆ¶');
        }).catch(err => {
            // é™çº§å¤„ç†
            const input = document.createElement('textarea');
            input.value = text;
            document.body.appendChild(input);
            input.select();
            document.execCommand('copy');
            document.body.removeChild(input);
            showToast(msg || 'å·²å¤åˆ¶');
        });
    }

    // å¤åˆ¶æ•´ç»„ CSS
    function copyPalette(colorsStr) {
        const css = `background: linear-gradient(135deg, ${colorsStr});`;
        copyToClipboard(css, 'ğŸ¨ CSS æ¸å˜ä»£ç å·²å¤åˆ¶ï¼');
    }

    // 1. ç¦ç”¨å³é”®èœå•
    document.addEventListener('contextmenu', function(e) {
        e.preventDefault(); // é˜»æ­¢é»˜è®¤å³é”®è¡Œä¸º
    });

    // 2. å±è”½F12ã€Ctrl+Shift+Iã€Ctrl+Uç­‰å¿«æ·é”®
    document.addEventListener('keydown', function(e) {
        // F12é”®
        if (e.key === 'F12') {
            e.preventDefault();
        }
        // Ctrl+Shift+I
        if (e.ctrlKey && e.shiftKey && e.key === 'I') {
            e.preventDefault();
        }
        // Ctrl+Uï¼ˆæŸ¥çœ‹é¡µé¢æºä»£ç ï¼‰
        if (e.ctrlKey && e.key === 'U') {
            e.preventDefault();
        }
        // Ctrl+Shift+Cï¼ˆå…ƒç´ æ£€æŸ¥ï¼‰
        if (e.ctrlKey && e.shiftKey && e.key === 'C') {
            e.preventDefault();
        }
    });
    
    // åˆå§‹åŒ–
    window.onload = generateBatch;
    document.addEventListener('keydown', (e) => {
        if(e.key === 'Enter') generateBatch();
    });

</script>

<style>
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(15px); }
    to { opacity: 1; transform: translateY(0); }
}
</style>

</body>
</html>
